
// Test your Bluetooth printer configuration
const testBluetooth = async () => {
  console.log('=== Bluetooth Printer Debug Info ===');
  
  // Check Web Bluetooth support
  if (!navigator.bluetooth) {
    console.error('‚ùå Web Bluetooth API not supported');
    return;
  }
  console.log('‚úÖ Web Bluetooth API supported');
  
  // Check saved config
  const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
  if (!user?.restaurantId) {
    console.error('‚ùå No user/restaurant ID');
    return;
  }
  
  const key = `restaurant_${user.restaurantId}_bluetoothPrinter`;
  const stored = localStorage.getItem(key);
  
  if (!stored) {
    console.error('‚ùå No saved Bluetooth printer config');
    return;
  }
  
  const config = JSON.parse(stored);
  console.log('üìã Config:', config);
  
  if (!config.enabled) {
    console.warn('‚ö†Ô∏è Printer disabled in settings');
    return;
  }
  
  console.log('üîÑ Testing connection...');
  
  try {
    // Test with service UUID
    const device = await navigator.bluetooth.requestDevice({
      filters: [{ services: [config.serviceUuid] }],
      optionalServices: [config.serviceUuid]
    });
    
    console.log('‚úÖ Device found:', device.name);
    
    const server = await device.gatt.connect();
    console.log('‚úÖ GATT connected');
    
    const service = await server.getPrimaryService(config.serviceUuid);
    console.log('‚úÖ Service obtained');
    
    const characteristic = await service.getCharacteristic(config.characteristicUuid);
    console.log('‚úÖ Characteristic obtained - READY!');
    
  } catch (error) {
    console.error('‚ùå Test failed:', error.message);
  }
};

// Run the test
testBluetooth();

